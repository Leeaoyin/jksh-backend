package com.letgee.domain.service.impl;import com.letgee.application.common.enums.HttpCodeEnum;import com.letgee.application.common.exception.ServerException;import com.letgee.application.common.model.Page;import com.letgee.application.common.model.QueryConditionForPosition;import com.letgee.application.common.model.QueryParam;import com.letgee.application.common.param.dto.PositionDTO;import com.letgee.application.common.param.vo.PositionVO;import com.letgee.application.handle.PositionHandler;import com.letgee.domain.service.PositionService;import com.letgee.infrastructure.repository.mapper.RelUserPositionOrderMapper;import com.letgee.infrastructure.repository.mapper.RhPositionMapper;import com.letgee.infrastructure.repository.po.RhPosition;import com.letgee.infrastructure.repository.po.RhSysUser;import org.apache.commons.collections4.CollectionUtils;import org.springframework.stereotype.Service;import org.springframework.transaction.annotation.Transactional;import tk.mybatis.mapper.entity.Example;import javax.annotation.Resource;import java.util.*;import java.util.stream.Collectors;@Servicepublic class PositionServiceImpl implements PositionService {        @Resource    RhPositionMapper rhPositionMapper;    @Resource    RelUserPositionOrderMapper relUserPositionOrderMapper;        @Override    @Transactional(rollbackFor = {RuntimeException.class})    public Boolean createPosition(Integer userId, PositionDTO positionDTO) {        RhPosition rhPosition = PositionHandler.convertDTO2PO(positionDTO);        rhPosition.setCreateTime(new Date());        rhPosition.setCreateUserId(userId);        return rhPositionMapper.insertSelective(rhPosition) > 0;    }    @Override    @Transactional    public Boolean deletePositionById(RhSysUser user, Integer id) {        return null;    }    @Override    public Boolean updatePositionById(RhSysUser user, PositionDTO positionDTO) {        return null;    }    @Override    public Page getAllPositions(QueryParam queryParam, QueryConditionForPosition queryConditionForPosition) {        List<RhPosition> rhPositionList = rhPositionMapper.getPagePositionByCondition(queryConditionForPosition);        List<PositionVO> collect = rhPositionList.stream().map(e -> PositionHandler.convertPO2VO(e)).collect(Collectors.toList());        return Page.builder()                .Date(collect)                .PageInfo(queryParam, rhPositionMapper.getCountByCondition(queryConditionForPosition))                .build();    }        @Override    public PositionVO getPositionById(Integer positionId) {        Example example = new Example(RhPosition.class);        example.createCriteria().andEqualTo("id", positionId);        return PositionHandler.convertPO2VO(rhPositionMapper.selectOneByExample(example));    }    private List<RhPosition> searchAllByField(String field, String value){        Example example = new Example(RhPosition.class);        example.createCriteria().andLike(field,"%"+ value + "%");        return rhPositionMapper.selectByExample(example);    }}